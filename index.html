<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodShare - Share Food, Save the Planet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fef8; /* A very light green for a friendly feel */
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }
        
        #map {
            height: 250px;
            width: 100%;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
        }
    </style>
</head>

<body class="text-gray-800">

    <div id="app" class="max-w-4xl mx-auto px-4 pb-24">

        <!-- Header / Navigation -->
        <header class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-sm border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-4">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center space-x-2">
                        <svg class="w-8 h-8 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"></path><path d="M7 13s.5-1 2-1 2.5 1 4 1 2.5-1 4-1 1.5 1 1.5 1"></path><path d="M8 8.5c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5c0 .6-.4 1.1-.9 1.4"></path><path d="M14.5 7c.8 0 1.5.7 1.5 1.5 0 .6-.4 1.1-.9 1.4"></path></svg>
                        <h1 class="text-xl font-bold text-gray-800">FoodShare</h1>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200">
            <div class="max-w-4xl mx-auto px-4">
                <div class="flex justify-around h-16">
                    <button data-view="home" class="nav-btn active flex flex-col items-center justify-center text-green-600 w-full">
                        <svg class="w-6 h-6 mb-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span class="text-xs font-medium">Home</span>
                    </button>
                    <button data-view="browse" class="nav-btn flex flex-col items-center justify-center text-gray-500 w-full">
                        <svg class="w-6 h-6 mb-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        <span class="text-xs font-medium">Browse</span>
                    </button>
                    <button data-view="add" class="nav-btn flex flex-col items-center justify-center text-gray-500 w-full">
                         <svg class="w-6 h-6 mb-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>
                        <span class="text-xs font-medium">Add</span>
                    </button>
                    <button data-view="profile" class="nav-btn flex flex-col items-center justify-center text-gray-500 w-full">
                         <svg class="w-6 h-6 mb-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        <span class="text-xs font-medium">Profile</span>
                    </button>
                </div>
            </div>
        </nav>


        <main class="pt-20">
            <!-- Home View -->
            <div id="home-view" class="view active">
                <section class="text-center py-8">
                    <h2 class="text-3xl font-bold text-green-600">Share Food, Save the Planet</h2>
                    <p class="text-gray-600 mt-2">Connect with your community to reduce food waste.</p>
                    <div class="mt-6 flex justify-center space-x-4">
                        <button class="bg-green-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-green-700 transition duration-300">Find Food Near You</button>
                        <button class="bg-white text-green-600 font-semibold py-3 px-6 rounded-full shadow-lg border border-green-600 hover:bg-green-50 transition duration-300" onclick="switchView('add')">+ Share Your Leftovers</button>
                    </div>
                </section>

                <section class="py-8">
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-2xl font-bold text-green-600">1,247</p>
                            <p class="text-sm text-gray-500">Meals Saved</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-green-600">423</p>
                            <p class="text-sm text-gray-500">Active Users</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-green-600">89</p>
                            <p class="text-sm text-gray-500">This Week</p>
                        </div>
                    </div>
                </section>

                <section class="py-8">
                     <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold">Fresh Food Available</h3>
                        <a href="#" class="text-green-600 font-semibold text-sm" onclick="switchView('browse')">View All</a>
                    </div>
                    <div class="text-center py-16 bg-gray-50 rounded-lg">
                        <div class="inline-block p-4 bg-green-100 rounded-full">
                           <svg class="w-8 h-8 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                        </div>
                        <p class="text-gray-600 mt-4 font-semibold">No food available right now</p>
                        <p class="text-gray-500 text-sm mt-1">Be the first to share leftovers in your community!</p>
                        <button class="mt-6 bg-green-600 text-white font-semibold py-2 px-5 rounded-full hover:bg-green-700 transition duration-300" onclick="switchView('add')">+ Share Your First Leftover</button>
                    </div>
                </section>
            </div>

            <!-- Browse View -->
            <div id="browse-view" class="view">
                <section class="py-2">
                    <h2 class="text-2xl font-bold">Browse Available Food</h2>
                    <p class="text-gray-500 text-sm mt-1">Find fresh leftovers shared by your community</p>

                    <div class="mt-4">
                        <input type="search" placeholder="Search by food, location, or description..." class="w-full p-3 border border-gray-300 rounded-lg">
                    </div>
                    
                    <div class="mt-6 min-h-[400px]" id="food-grid">
                         <!-- Food cards will be injected here -->
                         <div class="text-center py-16 text-gray-500">
                             <p>No food items have been shared yet.</p>
                         </div>
                    </div>
                </section>
            </div>

            <!-- Add View -->
            <div id="add-view" class="view">
                <section class="py-2">
                    <h2 class="text-2xl font-bold">Share Your Leftovers</h2>
                    <p class="text-gray-500 text-sm mt-1">Help reduce food waste by sharing with your community</p>

                    <form class="donation-form mt-6 space-y-4 bg-white p-6 rounded-lg shadow-md">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Food Title*</label>
                            <input type="text" placeholder="e.g. Homemade Lasagna" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Description</label>
                            <textarea placeholder="Describe your leftover food, ingredients, etc." rows="3" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"></textarea>
                        </div>
                         <div>
                            <label class="block text-sm font-medium text-gray-700">Photo</label>
                            <input type="file" id="food-photo" accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100">
                        </div>
                         <div>
                            <label class="block text-sm font-medium text-gray-700">Pickup Address*</label>
                            <input type="text" id="food-address" placeholder="Enter address or click on map" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
                        </div>
                        <div id="map"></div>
                        <button type="submit" class="w-full bg-green-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-green-700 transition duration-300">Share This Food</button>
                    </form>
                </section>
            </div>

            <!-- Profile View -->
            <div id="profile-view" class="view">
                 <section class="py-2">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-green-600 rounded-full flex items-center justify-center">
                            <span class="text-3xl font-bold text-white">L</span>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold">Lohith V Kallanagoudar</h2>
                            <p class="text-gray-500 text-sm">lohithv.842057@gmail.com</p>
                        </div>
                    </div>
                     <div class="mt-6 flex justify-end space-x-2">
                         <button class="bg-green-600 text-white font-semibold py-2 px-4 text-sm rounded-lg hover:bg-green-700">+ Share Food</button>
                         <button class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 text-sm rounded-lg hover:bg-gray-300">Settings</button>
                     </div>
                </section>
                
                 <section class="py-6">
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-2xl font-bold text-green-600">0</p>
                            <p class="text-sm text-gray-500">Food Shared</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-green-600">0</p>
                            <p class="text-sm text-gray-500">Food Claimed</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-green-600">0</p>
                            <p class="text-sm text-gray-500">Completed</p>
                        </div>
                    </div>
                </section>

                <section class="py-6">
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                            <a href="#" class="border-green-500 text-green-600 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm">My Shared Food</a>
                            <a href="#" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm">Food I've Claimed</a>
                            <a href="#" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm">Pickup Requests</a>
                        </nav>
                    </div>
                    <div class="text-center py-16 bg-gray-50 rounded-lg mt-4">
                        <p class="text-gray-600 font-semibold">No food shared yet</p>
                        <p class="text-gray-500 text-sm mt-1">Start sharing your leftovers to help reduce food waste!</p>
                        <button class="mt-6 bg-green-600 text-white font-semibold py-2 px-5 rounded-full hover:bg-green-700 transition duration-300" onclick="switchView('add')">+ Share Your First Item</button>
                    </div>
                </section>
            </div>

        </main>

    </div>

    <script>
        // --- DATA ---
        const foodData = [];

        // --- DOM ELEMENTS ---
        const navButtons = document.querySelectorAll(".nav-btn");
        const views = document.querySelectorAll(".view");
        const foodGrid = document.getElementById("food-grid");
        const donationForm = document.querySelector(".donation-form");

        // --- INITIALIZATION ---
        document.addEventListener("DOMContentLoaded", () => {
            renderFoodItems();
            setupEventListeners();
            initMap();
        });

        // --- EVENT LISTENERS ---
        function setupEventListeners() {
            navButtons.forEach((btn) => {
                btn.addEventListener("click", () => {
                   // Prevent switching if the view is already active
                   if (!btn.classList.contains('active')) {
                       switchView(btn.dataset.view);
                   }
                });
            });
            donationForm.addEventListener("submit", handleFormSubmission);
        }

        // --- VIEW SWITCHING ---
        function switchView(viewName) {
            // Update button styles
            navButtons.forEach((btn) => {
                if (btn.dataset.view === viewName) {
                    btn.classList.add("active", "text-green-600");
                    btn.classList.remove("text-gray-500");
                } else {
                    btn.classList.remove("active", "text-green-600");
                    btn.classList.add("text-gray-500");
                }
            });

            // Show/hide views
            views.forEach((view) => {
                view.classList.toggle("active", view.id === `${viewName}-view`);
            });
            
            // Scroll to top on view switch
            window.scrollTo(0, 0);
        }

        // --- RENDERING ---
        function renderFoodItems() {
            if (foodData.length === 0) {
                 foodGrid.innerHTML = `
                    <div class="text-center py-16 bg-gray-50 rounded-lg">
                        <div class="inline-block p-4 bg-green-100 rounded-full">
                           <svg class="w-8 h-8 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                        </div>
                        <p class="text-gray-600 mt-4 font-semibold">No food available right now</p>
                        <p class="text-gray-500 text-sm mt-1">Be the first to share leftovers in your community!</p>
                        <button class="mt-6 bg-green-600 text-white font-semibold py-2 px-5 rounded-full hover:bg-green-700 transition duration-300" onclick="switchView('add')">+ Share Your First Leftover</button>
                    </div>`;
                return;
            }

            foodGrid.innerHTML = foodData.map(food => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
                    ${food.photo ? `<img src="${food.photo}" alt="${food.name}" class="w-full h-40 object-cover">` : ''}
                    <div class="p-4">
                        <h3 class="font-bold text-lg">${food.name}</h3>
                        <p class="text-gray-600 text-sm mt-1">${food.details}</p>
                        <div class="flex items-center mt-3 text-gray-500 text-xs">
                             <svg class="w-4 h-4 mr-1.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                            <span>${food.location}</span>
                        </div>
                        <button class="mt-4 w-full bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition duration-300">Claim Food</button>
                    </div>
                </div>
            `).join("");
        }
        
        // --- FORM HANDLING ---
        function handleFormSubmission(e) {
            e.preventDefault();
            const foodName = e.target.querySelector('input[type="text"]').value;
            const details = e.target.querySelector("textarea").value;
            const location = document.getElementById("food-address").value;
            const photoInput = document.getElementById("food-photo");

            let photoURL = "https://placehold.co/600x400/a7f3d0/166534?text=Food+Image";
            if (photoInput.files && photoInput.files[0]) {
                photoURL = URL.createObjectURL(photoInput.files[0]);
            }

            if (foodName && location) {
                const newFood = {
                    id: foodData.length + 1,
                    name: foodName,
                    details: details,
                    location: location,
                    photo: photoURL,
                };
                foodData.unshift(newFood); // Add to the beginning of the array
                renderFoodItems();
                e.target.reset();
                
                // Show a success message and switch to browse view
                alert("Food donation submitted successfully!");
                switchView('browse');

            } else {
                alert("Please fill in at least the Food Title and Pickup Address.");
            }
        }

        // --- LEAFLET MAP ---
        let map, marker;

        function initMap() {
            // Tumakuru, Karnataka, India Coordinates
            const startCoordinates = [13.342, 77.112]; 
            map = L.map("map").setView(startCoordinates, 13);
            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            }).addTo(map);

            marker = L.marker(startCoordinates).addTo(map);

            map.on("click", async (e) => {
                const {
                    lat,
                    lng
                } = e.latlng;
                marker.setLatLng([lat, lng]);
                try {
                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`);
                    const data = await response.json();
                    document.getElementById("food-address").value = data.display_name || `${lat.toFixed(5)}, ${lng.toFixed(5)}`;
                } catch (error) {
                    console.error("Error fetching address:", error);
                     document.getElementById("food-address").value = `${lat.toFixed(5)}, ${lng.toFixed(5)}`;
                }
            });
        }
    </script>

</body>

</html>
"# Food-Share"
